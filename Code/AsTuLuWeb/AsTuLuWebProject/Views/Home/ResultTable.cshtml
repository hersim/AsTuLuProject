@using AsTuLuWebProject.Utilities.Enums
@model List<AsTuLuWebProject.ViewModels.BookDisplay>

<div class="bookView"style="clear: both">
    @for (int i = 0; i < Model.Count; i++)
    {
        string likeStatus;
        
        switch (Model[i].LikeState)
        {
            case null:
                likeStatus = "neutral";
                break;
            case (int)EnumLibrary.BookRelationshipEnum.Liked:
                likeStatus = "like";
                break;
            case (int)EnumLibrary.BookRelationshipEnum.Unliked:
                likeStatus = "unlike";
                break;
            default:
                likeStatus = "neutral";
                break;
        }

        <div class="bookUnit @likeStatus">
            @Html.ActionLink(" ", "BookDetails", "Book", new { @bookID = Model[i].BookID}, new { @class = "linkspan"})
            <div class="bookTitle" data-id="@Model[i].BookID">
                @{
                    if (Model[i].BookName.Length <= 25)
                    {
                        @Html.DisplayFor(item => item[i].BookName)
                    }
                    else
                    {
                        string name = Model[i].BookName.Substring(0, 25) + "...";
                        
                        <span>@name</span>
                    }
                }
            </div>    
            <div class="clear"></div>
            <div>
                @if (Model[i].ListAuthors.Count > 1)
                {
                    for (int j = 0; j < Model[i].ListAuthors.Count; j++)
                    {
                        if (j == Model[i].ListAuthors.Count - 1)
                        {
                            <span>
                                @Model[i].ListAuthors[j]
                            </span>
                        }
                        else
                        {
                            <span>
                                @Model[i].ListAuthors[j] -
                            </span>
                        }
                        
                    }
                }
                else
                {
                    <span>@Model[i].ListAuthors.First()</span>
                }
            </div>
            <div class="bookDetail" style="font-style: italic">
                @if (Model[i].ListEditors.Count > 1)
                {
                    <span>+ Éditeurs...</span>
                }
                else
                {
                    <span>@Model[i].ListEditors.First()</span>
                }
            </div>
            <div class="clear"></div>
        </div>
    }
</div>